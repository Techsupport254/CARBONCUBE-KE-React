<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title id="dynamic-title">Loading...</title>
    <meta name="description" id="dynamic-description" content="Loading product details...">
    <meta property="og:title" id="og-title" content="Loading...">
    <meta property="og:description" id="og-description" content="Loading product details...">
    <meta property="og:image" id="og-image" content="https://carboncube-ke.com/og-image.png">
    <meta property="og:url" id="og-url" content="">
    <script>
        // Server-side rendering script for instant SEO
        (function() {
            const urlParams = new URLSearchParams(window.location.search);
            const adId = urlParams.get('id') || window.location.pathname.split('/').pop();
            
            if (adId) {
                // Fetch ad data immediately for SEO
                fetch(`/api/buyer/ads/${adId}`)
                    .then(response => response.json())
                    .then(ad => {
                        if (ad && ad.title) {
                            // Update meta tags instantly
                            document.getElementById('dynamic-title').textContent = `${ad.title} | Carbon Cube Kenya`;
                            document.getElementById('dynamic-description').setAttribute('content', 
                                `Buy ${ad.title}${ad.brand ? ` by ${ad.brand}` : ''}${ad.price ? ` for KSh ${parseFloat(ad.price).toLocaleString()}` : ''} on Carbon Cube Kenya. ${ad.condition || 'new'} ${ad.category_name || 'product'} from verified seller ${ad.seller_name || 'Carbon Cube'}. Fast delivery across Kenya.`
                            );
                            document.getElementById('og-title').setAttribute('content', `${ad.title} | Carbon Cube Kenya`);
                            document.getElementById('og-description').setAttribute('content', 
                                `Buy ${ad.title}${ad.brand ? ` by ${ad.brand}` : ''}${ad.price ? ` for KSh ${parseFloat(ad.price).toLocaleString()}` : ''} on Carbon Cube Kenya.`
                            );
                            if (ad.media_urls && ad.media_urls.length > 0) {
                                document.getElementById('og-image').setAttribute('content', ad.media_urls[0]);
                            }
                            document.getElementById('og-url').setAttribute('content', window.location.href);
                        }
                    })
                    .catch(error => {
                        console.log('Ad data not available for SEO');
                    });
            }
        })();
    </script>
</head>
<body>
    <div id="root">
        <div style="text-align: center; padding: 50px;">
            <h1>Loading Product Details...</h1>
            <p>Please wait while we load the product information.</p>
        </div>
    </div>
</body>
</html>
